id: org.freedesktop.Sdk.Extension.jdtls
default-branch: 20.08
sdk: org.freedesktop.Sdk//20.08
sdk-extensions: 
runtime: org.freedesktop.Sdk
runtime-version: 20.08
build-extension: true
appstream-compose: false
modules:

  - name: jdtls
    buildsystem: simple
    build-commands:
      - tar -xvf jdtls.tar.gz
      - mkdir -p /usr/lib/sdk/jdtls/share
      - cp -r * /usr/lib/sdk/jdtls/share
      - mkdir -p /usr/lib/sdk/jdtls/bin
      - install -D -m 755 ./jdtls -t /usr/lib/sdk/jdtls/bin
    sources:
      - type: file
        url: https://download.eclipse.org/jdtls/snapshots/jdt-language-server-0.70.0-202102122102.tar.gz
        sha256: d32ecea9a6044ecace6dddb6b418336f86568591a9059f3f6b6119ae3ec0081f
        dest-filename: jdtls.tar.gz
      - type: file
        path: jdtls

  - name: metadata
    buildsystem: simple
    build-commands:
      - install -Dm644 -t ${FLATPAK_DEST}/share/metainfo ${FLATPAK_ID}.metainfo.xml
      - appstream-compose --basename=${FLATPAK_ID} --prefix=${FLATPAK_DEST} --origin=flatpak ${FLATPAK_ID}
    sources:
      - type: file
        path: org.freedesktop.Sdk.Extension.jdtls.metainfo.xml
